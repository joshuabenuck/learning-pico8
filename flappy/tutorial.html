<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Flappy Bird Tutorial</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/custom.css">
        <link rel="stylesheet" href="../theme/pico-8.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../overview/overview.html">Overview</a></li><li class="chapter-item expanded "><a href="../community/intro.html"><strong aria-hidden="true">1.</strong> The Community</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../community/splore.html"><strong aria-hidden="true">1.1.</strong> Splore</a></li></ol></li><li class="chapter-item expanded "><a href="../using/intro.html"><strong aria-hidden="true">2.</strong> Using PICO-8</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../using/limitations.html"><strong aria-hidden="true">2.1.</strong> Limitations</a></li><li class="chapter-item expanded "><a href="../using/code_editor.html"><strong aria-hidden="true">2.2.</strong> Code Editor</a></li><li class="chapter-item expanded "><a href="../using/sprite_editor.html"><strong aria-hidden="true">2.3.</strong> Sprite Editor</a></li><li class="chapter-item expanded "><a href="../using/map_editor.html"><strong aria-hidden="true">2.4.</strong> Map Editor</a></li><li class="chapter-item expanded "><a href="../using/sound_editor.html"><strong aria-hidden="true">2.5.</strong> Sound Editor</a></li><li class="chapter-item expanded "><a href="../using/music_editor.html"><strong aria-hidden="true">2.6.</strong> Music Editor</a></li><li class="chapter-item expanded "><a href="../using/coordinates.html"><strong aria-hidden="true">2.7.</strong> Coordinates</a></li><li class="chapter-item expanded "><a href="../using/programming_basics.html"><strong aria-hidden="true">2.8.</strong> Programming Basics</a></li><li class="chapter-item expanded "><a href="../using/the_game_loop.html"><strong aria-hidden="true">2.9.</strong> The Game Loop</a></li></ol></li><li class="chapter-item expanded "><a href="../flappy/tutorial.html" class="active"><strong aria-hidden="true">3.</strong> Flappy Bird Tutorial</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../flappy/code.html"><strong aria-hidden="true">3.1.</strong> Code Only</a></li></ol></li><li class="chapter-item expanded "><a href="../ag/intro/ag_tutorial.html"><strong aria-hidden="true">4.</strong> Adventure Game Tutorial</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ag/step_01/the_map.html"><strong aria-hidden="true">4.1.</strong> The Map</a></li><li class="chapter-item expanded "><a href="../ag/step_02/the_player.html"><strong aria-hidden="true">4.2.</strong> The Player</a></li><li class="chapter-item expanded "><a href="../ag/step_03/movement.html"><strong aria-hidden="true">4.3.</strong> Movement</a></li><li class="chapter-item expanded "><a href="../ag/step_04/camera.html"><strong aria-hidden="true">4.4.</strong> Camera</a></li><li class="chapter-item expanded "><a href="../ag/step_05/keys.html"><strong aria-hidden="true">4.5.</strong> Keys</a></li><li class="chapter-item expanded "><a href="../ag/step_06/inventory.html"><strong aria-hidden="true">4.6.</strong> Inventory</a></li><li class="chapter-item expanded "><a href="../ag/step_07/doors.html"><strong aria-hidden="true">4.7.</strong> Doors</a></li><li class="chapter-item expanded "><a href="../ag/step_08/animated_tiles.html"><strong aria-hidden="true">4.8.</strong> Animate Tiles</a></li><li class="chapter-item expanded "><a href="../ag/step_09/winning_and_losing.html"><strong aria-hidden="true">4.9.</strong> Winning and Losing</a></li><li class="chapter-item expanded "><a href="../ag/step_10/trying_again.html"><strong aria-hidden="true">4.10.</strong> Trying Again</a></li><li class="chapter-item expanded "><a href="../ag/step_11/bonus_adding_text.html"><strong aria-hidden="true">4.11.</strong> Bonus Step: Adding Text</a></li><li class="chapter-item expanded "><a href="../ag/step_12/bonus_unlimited_sprite_types.html"><strong aria-hidden="true">4.12.</strong> Bonus Step: Unlimited Sprite Types</a></li></ol></li><li class="chapter-item expanded "><a href="../ss/intro/intro.html"><strong aria-hidden="true">5.</strong> A Space Shooter in 16 Steps</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ss/step_01/draw_ship.html"><strong aria-hidden="true">5.1.</strong> Draw Ship on Screen</a></li><li class="chapter-item expanded "><a href="../ss/step_02/animate_propulsion.html"><strong aria-hidden="true">5.2.</strong> Animate Propulsion</a></li><li class="chapter-item expanded "><a href="../ss/step_03/ship_movement.html"><strong aria-hidden="true">5.3.</strong> Basic Ship Movement</a></li><li class="chapter-item expanded "><a href="../ss/step_04/fire_bullets.html"><strong aria-hidden="true">5.4.</strong> Fire Laser Bullets</a></li><li class="chapter-item expanded "><a href="../ss/step_05/remove_bullets.html"><strong aria-hidden="true">5.5.</strong> Remove Bullets</a></li><li class="chapter-item expanded "><a href="../ss/step_06/draw_enemies.html"><strong aria-hidden="true">5.6.</strong> Draw Enemies</a></li><li class="chapter-item expanded "><a href="../ss/step_07/move_enemies.html"><strong aria-hidden="true">5.7.</strong> Move Enemies</a></li><li class="chapter-item expanded "><a href="../ss/step_08/points_and_health.html"><strong aria-hidden="true">5.8.</strong> Points and Health</a></li><li class="chapter-item expanded "><a href="../ss/step_09/cleanup_and_prep.html"><strong aria-hidden="true">5.9.</strong> Collision 1: Cleanup and Prep</a></li><li class="chapter-item expanded "><a href="../ss/step_10/define_boxes.html"><strong aria-hidden="true">5.10.</strong> Collision 2: Define Boxes</a></li><li class="chapter-item expanded "><a href="../ss/step_11/collide_boxes.html"><strong aria-hidden="true">5.11.</strong> Collision 3: Collide Boxes</a></li><li class="chapter-item expanded "><a href="../ss/step_12/change_states.html"><strong aria-hidden="true">5.12.</strong> Change states</a></li><li class="chapter-item expanded "><a href="../ss/step_13/game_over.html"><strong aria-hidden="true">5.13.</strong> Health, Game Over, Immortaility</a></li><li class="chapter-item expanded "><a href="../ss/step_14/explosions.html"><strong aria-hidden="true">5.14.</strong> Explosions</a></li><li class="chapter-item expanded "><a href="../ss/step_15/stars.html"><strong aria-hidden="true">5.15.</strong> Stars</a></li><li class="chapter-item expanded "><a href="../ss/step_16/enemy_movement.html"><strong aria-hidden="true">5.16.</strong> Enemy Movement and Respawn</a></li></ol></li><li class="chapter-item expanded "><a href="../resources/resources.html"><strong aria-hidden="true">6.</strong> Resources</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" type="text/css" href="pico-8.css">
<h1 id="flappy-bird"><a class="header" href="#flappy-bird">Flappy Bird</a></h1>
<p>
This article has its origin in a tweet cart. I was shocked when I first saw it. It was a fully functional game in only 273 characters! I had to learn how it worked.
</p>
<p>
The question that captivated me was, how small can you make a version of a game and still have it be recognizable as that game? If you distill a game down to its core, what does it look like? If you remove everything you can and then remove some more, when can you no longer call it the same game?
</p>
<p>
These are some the questions we are going to explore by building up a distilled version of the game Flappy Bird, from scratch.
</p>
<p>
The game we make will be recognizable as Flappy Bird, but not much beyond that.
</p>
<p>
This approach provides several benefits. It allows us to focus on the core game mechanics and to forget everything else. We can explore questions about what is essential and what can be added later. We gain a better understand the cost of each addition. We will focus on adding things in a fashion that allows us to playtest them along the way.
</p>
<p>
The essence of Flappy Bird can be captured in a mere 45 lines of code.
</p>
<p>
Ready? Let's go!
</p>
<div>
<p>
In Flappy Bird, you control a small bird who is constantly moving forward and must flap its wings to keep itself aflight while carefully timing those flaps so it doesn't run into the pipes that are constantly getting in the way.
</p>
</div>
<div>
	<div class="pico8-src c08b" style="width: 500px">&nbsp;</div>
	<div class="pico8-src" style="width: 500px">
		<div><span class="c13t">-- Here are the steps needed.</span></div>
		<div><span class="c13t">-- * draw and control a bird</span></div>
		<div><span class="c13t">-- * draw and move pipes</span></div>
		<div><span class="c13t">-- * collision detection</span></div>
		<div><span class="c13t">-- * add a score</span></div>
		<div><span class="c13t">-- * add another pipe and randomness</span></div>
	</div>
	<div class="pico8-src c08b" style="width: 500px">&nbsp;</div>
</div>
<h1 id="draw-and-control-a-bird"><a class="header" href="#draw-and-control-a-bird">Draw and Control a Bird</a></h1>
<p>
We start by drawing our bird.
</p>
<div class="grid-container"><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="add"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div class="add">	<span class="c06t">y</span><span class="c07t">=</span><span class="c12t">64</span>
</div>
<div class="add"><span class="c14t">end</span>
</div>
<div>
</div>
<div class="add"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">draw</span><span class="c07t">()</span>
</div>
<div class="add">	<span class="c11t">cls</span><span class="c07t">()</span>
</div>
<div class="add">	<span class="c11t">circ</span><span class="c07t">(</span><span class="c12t">30</span><span class="c07t">,</span><span class="c06t">y</span><span class="c07t">-</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">8</span><span class="c07t">)</span>
</div>
<div class="add"><span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
<p>
<img src="001-bird.png">
</p>
</div><div>
<p>
The bird is a red circle outline. The bottom right hand corner of the bird is at <span class="pico8-snippet"><span class="c12t">30</span><span class="c07t">,</span><span class="c06t">y</span></span>. Since the <span class="pico8-snippet"><span class="c11t">circ</span></span> function takes the center of the circle, we pass in <span class="pico8-snippet"><span class="c12t">26</span><span class="c07t">-</span><span class="c06t">y</span></span>. Forgetting to do this will cause subtle problems later on!
</p>
<p>
If you want a more solid bird, change <span class="pico8-snippet"><span class="c11t">circ</span></span> to <span class="pico8-snippet"><span class="c11t">circfill</span></span>.
</p>
<p>
If you are feeling adventurous, you can create sprite <span class="pico8-snippet"><span class="c12t">1</span></span> and use <span class="pico8-snippet"><span class="c11t">spr</span><span class="c07t">(</span><span class="c12t">22</span><span class="c07t">,</span><span class="c06t">y</span><span class="c07t">-</span><span class="c12t">8</span><span class="c07t">,</span><span class="c12t">1</span><span class="c07t">)</span></span> instead of <span class="pico8-snippet"><span class="c11t">circ</span></span>, but there a few cautions to keep in mind to avoid breaking our collision detection logic..
</p>
<ul>
<li>Be sure to use <span class="pico8-snippet"><span class="c12t">22</span><span class="c07t">,</span><span class="c06t">y</span><span class="c07t">-</span><span class="c12t">8</span></span> and not <span class="pico8-snippet"><span class="c12t">26</span><span class="c07t">,</span><span class="c06t">y</span><span class="c07t">-</span><span class="c12t">4</span></span> or <span class="pico8-snippet"><span class="c12t">30</span><span class="c07t">,</span><span class="c06t">y</span></span> when drawing your sprite!</li>
</ul>
<ul>
<li>Use an 8x8 sprite.</li>
</ul>
</div></div>
<p>
Having a bird float in the middle of the air is no fun (and it is kind of weird). Let's fix that!
</p>
<div class="grid-container"><div>
<p>
We use <span class="pico8-snippet"><span class="c06t">O</span></span> to control our bird. Pressing it causes the bird to flap its wings and gain a little altitude, but gravity is always trying to pull it down.
</p>
<p>
Since our bird has nothing to avoid and only moves vertically, you may want to wait a bit before trying the next couple of modification ideas.
</p>
<p>
<span class="pico8-snippet"><span class="c06t">dy</span></span> controls our fall rate. Adjust the <span class="pico8-snippet"><span class="c07t">.</span><span class="c12t">6</span></span> value down, for flaps to be more forgiving. Change <span class="pico8-snippet"><span class="c12t">5</span></span> down to require more flapping!
</p>
<p>
If you want to control the bird with either <span class="pico8-snippet"><span class="c06t">O</span></span> or <span class="pico8-snippet"><span class="c06t">X</span></span>, change the if to read:<span class="pico8-snippet"> <span class="None"> </span><span class="c14t">if</span><span class="c07t">(</span><span class="c11t">btnp</span><span class="c07t">(</span><span class="c06t">O</span><span class="c07t">)</span> <span class="None"> </span><span class="c14t">or</span> <span class="None"> </span><span class="c11t">btnp</span><span class="c07t">(</span><span class="c06t">X</span><span class="c07t">))</span> <span class="None"> </span><span class="c06t">dy</span><span class="c07t">-=</span><span class="c12t">5</span></span>.
</p>
<p>
If you want a bird who can flap nonstop, change <span class="pico8-snippet"><span class="c11t">btnp</span></span> to <span class="pico8-snippet"><span class="c11t">btn</span></span>. (I find individual flaps to be more satisfying. What is your preference?)
</p>
</div><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c06t">y</span><span class="c07t">=</span><span class="c12t">64</span>
</div>
<div class="add">	<span class="c06t">dy</span><span class="c07t">=</span><span class="c12t">2</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
<div>
</div>
<div class="add"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">update</span><span class="c07t">()</span>
</div>
<div class="add">	<span class="c06t">dy</span><span class="c07t">-=.</span><span class="c12t">6</span>
</div>
<div class="add">	<span class="c14t">if</span><span class="c07t">(</span><span class="c11t">btnp</span><span class="c07t">(</span><span class="c06t">O</span><span class="c07t">)) </span><span class="c06t">dy</span><span class="c07t">=</span><span class="c12t">5</span>
</div>
<div class="add">	<span class="c06t">y</span><span class="c07t">-=</span><span class="c06t">dy</span>
</div>
<div class="add"><span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
<p>
<video controls poster="001-bird.png"> <source src="001-bird-flap.mp4"/> </video>
</p>
</div></div>
<h1 id="draw-and-control-pipes"><a class="header" href="#draw-and-control-pipes">Draw and Control Pipes</a></h1>
<p>
Next up, pipes to avoid!
</p>
<p>
We are going to use a bit of a unique approach to the pipes. Internally, we will cause the pipes to move toward the bird. The description of the code will similarly talk about the "pipes moving". This may seem a bit weird, but it ultimately makes no difference to the visual experience and the simplification of the implementation it enables is well worth it.
</p>
<div class="grid-container"><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c06t">y</span><span class="c07t">=</span><span class="c12t">64</span>
</div>
<div class="lea">	<span class="c06t">dy</span><span class="c07t">=</span><span class="c12t">2</span>
</div>
<div class="lea">	<span class="c06t">dx</span><span class="c07t">=</span><span class="c12t">2</span>
</div>
<div class="add">	<span class="c06t">pw</span><span class="c07t">=</span><span class="c12t">16</span>
</div>
<div class="add">	<span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
<div>
</div>
<div class="add"><span class="c14t">function </span><span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div class="add">	<span class="c06t">x</span><span class="c07t">=</span><span class="c12t">128</span>
</div>
<div class="add">	<span class="c06t">p</span><span class="c07t">=</span><span class="c12t">50</span>
</div>
<div class="add">	<span class="c06t">bp</span><span class="c07t">=</span><span class="c06t">p</span><span class="c07t">+</span><span class="c12t">20</span>
</div>
<div class="add"><span class="c14t">end</span>
</div>
<div>
</div>
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">update</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c06t">dy</span><span class="c07t">-=.</span><span class="c12t">6</span>
</div>
<div class="lea">	<span class="c14t">if</span><span class="c07t">(</span><span class="c11t">btnp</span><span class="c07t">(</span><span class="c06t">O</span><span class="c07t">)) </span><span class="c06t">dy</span><span class="c07t">=</span><span class="c12t">5</span>
</div>
<div class="lea">	<span class="c06t">y</span><span class="c07t">-=</span><span class="c06t">dy</span>
</div>
<div class="add">	<span class="c06t">x</span><span class="c07t">-=</span><span class="c06t">dx</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
<div>
</div>
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">draw</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c11t">cls</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c11t">circ</span><span class="c07t">(</span><span class="c12t">30</span><span class="c07t">,</span><span class="c06t">y</span><span class="c07t">-</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">8</span><span class="c07t">)</span>
</div>
<div class="add">	<span class="c11t">rect</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t">,</span><span class="c06t">bp</span><span class="c07t">,</span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">,</span><span class="c12t">128</span><span class="c07t">,</span><span class="c12t">3</span><span class="c07t">)</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
</div><div>
<ul>
<li><span class="pico8-snippet"><span class="c06t">dx</span></span> is the speed the pipe approaches.</li>
</ul>
<ul>
<li><span class="pico8-snippet"><span class="c06t">x</span></span> is the left hand edge of the oncoming pipe.</li>
</ul>
<ul>
<li><span class="pico8-snippet"><span class="c06t">pw</span></span> is the width of our pipe (which makes <span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span></span> the right hand edge).</li>
</ul>
<p>
If you want the pipes to move across the screen more quickly, adjust <span class="pico8-snippet"><span class="c06t">dx</span></span>. Once we have a score, you could consider adjusting it up a bit each time the player scores another <span class="pico8-snippet"><span class="c12t">10</span></span> points (or even <span class="pico8-snippet"><span class="c12t">1</span></span> point).
</p>
<p>
Adjusting the value of <span class="pico8-snippet"><span class="c06t">x</span></span> up will increase the space between pipes. Adjusting it down is inadvisable at the moment as it will result in a pipe appearing out of nowhere onto the screen.
</p>
</div></div>
<div class="grid-container"><div>
<p>
If you run the cart, you'll notice that once the pipe moves off the screen, the bird is left all alone! Let's cause a new pipe to appear once the first pipe goes off the screen.
</p>
</div><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">update</span><span class="c07t">()</span>
</div>
<div class="add">	<span class="c14t">if</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t"><-</span><span class="c06t">pw</span><span class="c07t">) </span><span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c06t">dy</span><span class="c07t">-=.</span><span class="c12t">6</span>
</div>
<div class="lea">	<span class="c14t">if</span><span class="c07t">(</span><span class="c11t">btnp</span><span class="c07t">(</span><span class="c06t">O</span><span class="c07t">)) </span><span class="c06t">dy</span><span class="c07t">=</span><span class="c12t">5</span>
</div>
<div class="lea">	<span class="c06t">y</span><span class="c07t">-=</span><span class="c06t">dy</span>
</div>
<div class="lea">	<span class="c06t">x</span><span class="c07t">-=</span><span class="c06t">dx</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
</div></div>
<p>
We want until the right edge of the pipe (<span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span></span>) goes off of the screen (<span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">=</span><span class="c12t">0</span></span> is the edge of the screen) and then call <span class="pico8-snippet"><span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span></span> to reset the pipe back to the right egde. If we remove it earlier, the pipes would look like they just disappear! We can delay it if we want the next pipe to come later.
</p>
<p>
Note: This conditional be written as <span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t"><</span><span class="c12t">0</span></span>, but <span class="pico8-snippet"><span class="c06t">x</span><span class="c07t"><-</span><span class="c06t">pw</span></span> is a bit shorter.
</p>
<p>
Now the bird can flap and fly over (or into) pipe after pipe without end!
</p>
<h1 id="adding-collision-detection"><a class="header" href="#adding-collision-detection">Adding Collision Detection</a></h1>
<p>
The "flying into" part is what we will fix next, but we will need to build up to it over a few sets of changes.
</p>
<p>
Generic collision detection does four different comparisons to determine if objects overlap. Since our pipes go off screen, we can eliminate one of these.
</p>
<div class="grid-container"><div>
<p>
Let's start with detecting whether the left edge of the bird (<span class="pico8-snippet"><span class="c12t">30</span></span>) is past the left edge of the oncoming pipe (<span class="pico8-snippet"><span class="c06t">x</span></span>).
</p>
</div><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">update</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c14t">if</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t"><-</span><span class="c06t">pw</span><span class="c07t">) </span><span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c06t">dy</span><span class="c07t">-=.</span><span class="c12t">6</span>
</div>
<div class="lea">	<span class="c14t">if</span><span class="c07t">(</span><span class="c11t">btnp</span><span class="c07t">(</span><span class="c06t">O</span><span class="c07t">)) </span><span class="c06t">dy</span><span class="c07t">=</span><span class="c12t">5</span>
</div>
<div class="lea">	<span class="c06t">y</span><span class="c07t">-=</span><span class="c06t">dy</span>
</div>
<div class="lea">	<span class="c06t">x</span><span class="c07t">-=</span><span class="c06t">dx</span>
</div>
<div class="add">	<span class="c14t">if </span><span class="c06t">x</span><span class="c07t"><=</span><span class="c12t">30 </span><span class="c14t">then</span>
</div>
<div class="add">		<span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div class="add">	<span class="c14t">end</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
</div></div>
<p>
The moment the bird passes the edge of the pipe, the game will reset, but the game resets even if we were way above the pipe!
</p>
<div class="grid-container"><div>
<p>
To correct this, we need to add another check. This one will be whether the bottom edge of the bird (<span class="pico8-snippet"><span class="c06t">y</span></span>) is below the top edge of the bottom pipe (<span class="pico8-snippet"><span class="c06t">bp</span></span>). Since <span class="pico8-snippet"><span class="c06t">y</span></span> values go down, we need to see if <span class="pico8-snippet"><span class="c06t">y</span><span class="c07t">>=</span><span class="c06t">bp</span></span>.
</p>
</div><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="lea">	<span class="c14t">if </span><span class="c06t">x</span><span class="c07t"><=</span><span class="c12t">30 </span><span class="c14t">then</span>
</div>
<div class="add">		<span class="c14t">if </span><span class="c06t">y</span><span class="c07t">>=</span><span class="c06t">bp </span><span class="c14t">then</span>
</div>
<div class="lea">			<span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div class="add">		<span class="c14t">end</span>
</div>
<div class="lea">	<span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
</div></div>
<p>
This is a little better. We can fly high above a pipe and the game won't reset, but the moment we fly past a pipe and drop down below where the top of the pipe was, the game resets!
</p>
<div class="grid-container"><div>
<p>
To fix this, we add the final check. We look to see if the left edge of the bird (<span class="pico8-snippet"><span class="c12t">30</span><span class="c07t">-</span><span class="c12t">8</span></span> or <span class="pico8-snippet"><span class="c12t">22</span></span>) is not past the right edge of the pipe (<span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span></span>).
</p>
</div><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="mod">	<span class="c14t">if </span><span class="c06t">x</span><span class="c07t"><=</span><span class="c12t">30 </span><span class="c14t">and </span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">>=</span><span class="c12t">22 </span><span class="c14t">then</span>
</div>
<div class="lea">		<span class="c14t">if </span><span class="c06t">y</span><span class="c07t">>=</span><span class="c06t">bp </span><span class="c14t">then</span>
</div>
<div class="lea">			<span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div class="lea">		<span class="c14t">end</span>
</div>
<div class="lea">	<span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
</div></div>
<p>
With that, the game should never reset on us unless the bird hits a pipe.
</p>
<h1 id="adding-a-score"><a class="header" href="#adding-a-score">Adding a Score</a></h1>
<p>
Let's add a score to keep track of how many times we pass a pipe without getting hit.
</p>
<div class="grid-container"><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c06t">y</span><span class="c07t">=</span><span class="c12t">64</span>
</div>
<div class="lea">	<span class="c06t">dy</span><span class="c07t">=</span><span class="c12t">2</span>
</div>
<div class="lea">	<span class="c06t">dx</span><span class="c07t">=</span><span class="c12t">2</span>
</div>
<div class="lea">	<span class="c06t">pw</span><span class="c07t">=</span><span class="c12t">16</span>
</div>
<div class="add">	<span class="c06t">s</span><span class="c07t">=</span><span class="c12t">0</span>
</div>
<div class="lea">	<span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
<div>
</div>
<div class="add"><span class="c13t">-- skipping --</span>
</div>
<div>
</div>
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">draw</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c11t">cls</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c11t">circ</span><span class="c07t">(</span><span class="c12t">30</span><span class="c07t">,</span><span class="c06t">y</span><span class="c07t">-</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">8</span><span class="c07t">)</span>
</div>
<div class="lea">	<span class="c11t">rect</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t">,</span><span class="c06t">bp</span><span class="c07t">,</span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">,</span><span class="c12t">128</span><span class="c07t">,</span><span class="c12t">3</span><span class="c07t">)</span>
</div>
<div class="add">	<span class="c07t">?</span><span class="c06t">s</span><span class="c07t">,</span><span class="c12t">64</span><span class="c07t">,</span><span class="c12t">0</span><span class="c07t">,</span><span class="c12t">7</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
</div><div>
<p>
This displays a score, but we never increment it! The question is, when should we increment it?
</p>
<p>
This one is a bit tricky. We need to detect the moment the left edge of the bird passes the right edge of the pipe without hitting it. This occurs when <span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">==</span><span class="c12t">22</span><span class="c07t">-</span><span class="c12t">1</span></span> which translates to <span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">+</span><span class="c12t">16</span><span class="c07t">==</span><span class="c12t">21</span></span> or <span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">==</span><span class="c12t">5</span></span> so <span class="pico8-snippet"><span class="c14t">if</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t">==</span><span class="c12t">5</span><span class="c07t">)</span> <span class="None"> </span><span class="c06t">s</span><span class="c07t">+=</span><span class="c12t">1</span></span>. This is technically correct, but if you try it, it doesn't work.
</p>
<p>
The reason is <span class="pico8-snippet"><span class="c06t">dx</span><span class="c07t">=</span><span class="c12t">2</span></span>. When <span class="pico8-snippet"><span class="c06t">x</span></span> starts at <span class="pico8-snippet"><span class="c12t">128</span></span> and decreases by <span class="pico8-snippet"><span class="c12t">2</span></span> each frame, it will never equal <span class="pico8-snippet"><span class="c12t">5</span></span>. You may be tempted to just say <span class="pico8-snippet"><span class="c14t">if</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t"><</span><span class="c12t">5</span><span class="c07t">)</span> <span class="None"> </span><span class="c06t">s</span><span class="c07t">+=</span><span class="c12t">1</span></span>, but then the score will increase for several frames after the bird passes the pipe and before it moves back to the righthand side of the screen.
</p>
<p>
I thought about maintaining a boolean to track whether we have increased the score since the last pipe creation. I even had it implemented at some point, but it was cumbersome and complex.
</p>
</div></div>
<div class="grid-container"><div>
<p>
The solution I settled on and recommend is to use a check of <span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">==</span><span class="c12t">4</span></span>. (If you changed <span class="pico8-snippet"><span class="c06t">dx</span><span class="c07t">=</span><span class="c12t">2</span></span> in <span class="pico8-snippet"><span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span></span>, you may need to adjust this.)
</p>
</div><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="lea">	<span class="c14t">if </span><span class="c06t">x</span><span class="c07t"><=</span><span class="c12t">30 </span><span class="c14t">and </span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">>=</span><span class="c12t">22  </span><span class="c14t">then</span>
</div>
<div class="lea">		<span class="c14t">if </span><span class="c06t">y</span><span class="c07t">>=</span><span class="c06t">bp  </span><span class="c14t">then</span>
</div>
<div class="lea">			<span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div class="lea">		<span class="c14t">end</span>
</div>
<div class="lea">	<span class="c14t">end</span>
</div>
<div class="add">	<span class="c14t">if</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t">==</span><span class="c12t">4</span><span class="c07t">) </span><span class="c06t">s</span><span class="c07t">+=</span><span class="c12t">1</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
</div></div>
<p>
Now the score will increment (and only increment once) when you pass a pipe.
</p>
<h1 id="adding-another-pipe-and-randomness"><a class="header" href="#adding-another-pipe-and-randomness">Adding Another Pipe and Randomness</a></h1>
<p>
You could argue this is a complete game. We have a way to fail and we have a score we can try to beat, but Flappy Bird games require that you go between two pipes so let's add a top pipe.
</p>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="lea"><span class="c14t">function </span><span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c06t">p</span><span class="c07t">=</span><span class="c12t">50</span>
</div>
<div class="add">	<span class="c06t">tp</span><span class="c07t">=</span><span class="c06t">p</span><span class="c07t">-</span><span class="c12t">20</span>
</div>
<div class="lea">	<span class="c06t">bp</span><span class="c07t">=</span><span class="c06t">p</span><span class="c07t">+</span><span class="c12t">20</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
<div>
</div>
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">update</span><span class="c07t">()</span>
</div>
<div class="add"><span class="c13t">-- skipping --</span>
</div>
<div class="lea">	<span class="c14t">if </span><span class="c06t">x</span><span class="c07t">>=</span><span class="c12t">30 </span><span class="c14t">and </span><span class="c12t">22</span><span class="c07t">>=</span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw </span><span class="c14t">then</span>
</div>
<div class="add">		<span class="c14t">if </span><span class="c06t">y</span><span class="c07t">>=</span><span class="c06t">bp </span><span class="c14t">or </span><span class="c06t">y</span><span class="c07t"><=</span><span class="c06t">tp </span><span class="c14t">then</span>
</div>
<div class="lea">			<span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div class="add">		<span class="c14t">end</span>
</div>
<div class="lea">	<span class="c14t">end</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
<div>
</div>
<div class="lea"><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">draw</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c11t">cls</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c11t">circ</span><span class="c07t">(</span><span class="c12t">30</span><span class="c07t">,</span><span class="c06t">y</span><span class="c07t">-</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">8</span><span class="c07t">)</span>
</div>
<div class="lea">	<span class="c11t">rect</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t">,</span><span class="c06t">bp</span><span class="c07t">,</span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">,</span><span class="c12t">128</span><span class="c07t">,</span><span class="c12t">3</span><span class="c07t">)</span>
</div>
<div class="add">	<span class="c11t">rect</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t">,</span><span class="c06t">tp</span><span class="c07t">,</span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">,-</span><span class="c12t">1</span><span class="c07t">,</span><span class="c12t">3</span><span class="c07t">)</span>
</div>
<div class="lea">	<span class="c07t">?</span><span class="c06t">s</span><span class="c07t">,</span><span class="c12t">64</span><span class="c07t">,</span><span class="c12t">0</span><span class="c07t">,</span><span class="c12t">7</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
<p>
With these changes, we now have an opening we have to try to get through, but you'll notice that it is always at the same height.
</p>
<p>
Let's add some randomness to make the game a bit more challenging.
</p>
<div class="grid-container"><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div class="lea"><span class="c14t">function </span><span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div class="lea">	<span class="c06t">x</span><span class="c07t">=</span><span class="c12t">128</span>
</div>
<div class="mod">	<span class="c06t">p</span><span class="c07t">=</span><span class="c12t">20</span><span class="c07t">+</span><span class="c11t">flr</span><span class="c07t">(</span><span class="c11t">rnd</span><span class="c07t">(</span><span class="c12t">88</span><span class="c07t">))</span>
</div>
<div class="mod">	<span class="c06t">bp</span><span class="c07t">=</span><span class="c06t">p</span><span class="c07t">+</span><span class="c12t">20</span>
</div>
<div class="mod">	<span class="c06t">tp</span><span class="c07t">=</span><span class="c06t">p</span><span class="c07t">-</span><span class="c12t">20</span>
</div>
<div class="lea"><span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
</div><div>
<p>
Why this equation? A few reasons. The screen is 128 pixels tall. If <span class="pico8-snippet"><span class="c11t">rnd</span><span class="c07t">(</span><span class="c12t">88</span><span class="c07t">)</span></span> returns <span class="pico8-snippet"><span class="c12t">0</span></span> then the top pipe will be <span class="pico8-snippet"><span class="c12t">20</span><span class="c07t">+</span><span class="c12t">0</span><span class="c07t">-</span><span class="c12t">20</span></span> pixels from the top of the screen. If <span class="pico8-snippet"><span class="c11t">rnd</span><span class="c07t">(</span><span class="c12t">88</span><span class="c07t">)</span></span> returns <span class="pico8-snippet"><span class="c12t">88</span></span>, then the bottom pipe will be at <span class="pico8-snippet"><span class="c12t">20</span><span class="c07t">+</span><span class="c12t">88</span><span class="c07t">+</span><span class="c12t">20</span></span> which is right at the bottom of the screen. If you don't want that, decrease <span class="pico8-snippet"><span class="c12t">88</span></span> by the same amount you increase the <span class="pico8-snippet"><span class="c12t">20</span><span class="c07t">+</span></span>.
</p>
<p>
If you want a smaller opening, decrease the <span class="pico8-snippet"><span class="c07t">+</span><span class="c12t">20</span></span>/<span class="pico8-snippet"><span class="c07t">-</span><span class="c12t">20</span></span>. The current calculation gives you a 40 pixel tall opening.
</p>
<p>
A subtle point worth mentioning is the call to <span class="pico8-snippet"><span class="c11t">flr</span></span>. <span class="pico8-snippet"><span class="c11t">rnd</span></span> returns a floating point value and this messes with our scoring logic. By flooring it, we ensure that <span class="pico8-snippet"><span class="c06t">x</span><span class="c07t">==</span><span class="c12t">4</span></span> will be true if the bird passes a pipe.
</p>
<p>
If you want a laugh, change <span class="pico8-snippet"><span class="c06t">y</span><span class="c07t">+=</span><span class="c06t">dy</span></span> to <span class="pico8-snippet"><span class="c06t">y</span><span class="c07t">=</span><span class="c06t">p</span></span>. That's what I call precision flying!
</p>
</div></div>
<h1 id="summary-and-next-steps"><a class="header" href="#summary-and-next-steps">Summary and Next Steps</a></h1>
<div class="grid-container"><div>
<div class="pico8-src c08b">&nbsp;</div>
<div class="pico8-src">
<div><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div>	<span class="c06t">y</span><span class="c07t">=</span><span class="c12t">64</span>
</div>
<div>	<span class="c06t">dy</span><span class="c07t">=</span><span class="c12t">2</span>
</div>
<div>	<span class="c06t">dx</span><span class="c07t">=</span><span class="c12t">2</span>
</div>
<div>	<span class="c06t">pw</span><span class="c07t">=</span><span class="c12t">16</span>
</div>
<div>	<span class="c06t">s</span><span class="c07t">=</span><span class="c12t">0</span>
</div>
<div>	<span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div><span class="c14t">end</span>
</div>
<div>
</div>
<div><span class="c14t">function </span><span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div>	<span class="c06t">x</span><span class="c07t">=</span><span class="c12t">128</span>
</div>
<div>	<span class="c06t">p</span><span class="c07t">=</span><span class="c12t">20</span><span class="c07t">+</span><span class="c11t">flr</span><span class="c07t">(</span><span class="c11t">rnd</span><span class="c07t">(</span><span class="c12t">88</span><span class="c07t">))</span>
</div>
<div>	<span class="c06t">tp</span><span class="c07t">=</span><span class="c06t">p</span><span class="c07t">-</span><span class="c12t">20</span>
</div>
<div>	<span class="c06t">bp</span><span class="c07t">=</span><span class="c06t">p</span><span class="c07t">+</span><span class="c12t">20</span>
</div>
<div><span class="c14t">end</span>
</div>
<div>
</div>
<div><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">update</span><span class="c07t">()</span>
</div>
<div>	<span class="c14t">if</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t"><-</span><span class="c06t">pw</span><span class="c07t">) </span><span class="c06t">create</span><span class="c07t">_</span><span class="c06t">pipe</span><span class="c07t">()</span>
</div>
<div>	<span class="c06t">dy</span><span class="c07t">-=.</span><span class="c12t">6</span>
</div>
<div>	<span class="c14t">if</span><span class="c07t">(</span><span class="c11t">btnp</span><span class="c07t">(</span><span class="c06t">O</span><span class="c07t">)) </span><span class="c06t">dy</span><span class="c07t">=</span><span class="c12t">5</span>
</div>
<div>	<span class="c06t">y</span><span class="c07t">-=</span><span class="c06t">dy</span>
</div>
<div>	<span class="c06t">x</span><span class="c07t">-=</span><span class="c06t">dx</span>
</div>
<div>	<span class="c14t">if </span><span class="c06t">x</span><span class="c07t"><=</span><span class="c12t">30 </span><span class="c14t">and </span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">>=</span><span class="c12t">22 </span><span class="c14t">then</span>
</div>
<div>		<span class="c14t">if </span><span class="c06t">y</span><span class="c07t">>=</span><span class="c06t">bp </span><span class="c14t">or </span><span class="c06t">y</span><span class="c07t">-</span><span class="c12t">8</span><span class="c07t"><=</span><span class="c06t">tp </span><span class="c14t">then</span>
</div>
<div>			<span class="c07t">_</span><span class="c06t">init</span><span class="c07t">()</span>
</div>
<div>		<span class="c14t">end</span>
</div>
<div>	<span class="c14t">end</span>
</div>
<div>	<span class="c14t">if</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t">==</span><span class="c12t">4</span><span class="c07t">) </span><span class="c06t">s</span><span class="c07t">+=</span><span class="c12t">1</span>
</div>
<div><span class="c14t">end</span>
</div>
<div>
</div>
<div><span class="c14t">function </span><span class="c07t">_</span><span class="c06t">draw</span><span class="c07t">()</span>
</div>
<div>	<span class="c11t">cls</span><span class="c07t">()</span>
</div>
<div>	<span class="c11t">circ</span><span class="c07t">(</span><span class="c12t">30</span><span class="c07t">,</span><span class="c06t">y</span><span class="c07t">-</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">4</span><span class="c07t">,</span><span class="c12t">8</span><span class="c07t">)</span>
</div>
<div>	<span class="c11t">rect</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t">,</span><span class="c06t">bp</span><span class="c07t">,</span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">,</span><span class="c12t">128</span><span class="c07t">,</span><span class="c12t">3</span><span class="c07t">)</span>
</div>
<div>	<span class="c11t">rect</span><span class="c07t">(</span><span class="c06t">x</span><span class="c07t">,</span><span class="c06t">tp</span><span class="c07t">,</span><span class="c06t">x</span><span class="c07t">+</span><span class="c06t">pw</span><span class="c07t">,-</span><span class="c12t">1</span><span class="c07t">,</span><span class="c12t">3</span><span class="c07t">)</span>
</div>
<div>	<span class="c07t">?</span><span class="c06t">s</span><span class="c07t">,</span><span class="c12t">64</span><span class="c07t">,</span><span class="c12t">0</span><span class="c07t">,</span><span class="c12t">7</span>
</div>
<div><span class="c14t">end</span>
</div>
</div>
<div class="pico8-src c08b">&nbsp;</div>
</div><div>
<p>
With that, we have completed our distillation of Flappy Bird. The core game mexhanics are all there. It may not look like much, but if you give it a fresh coat of paint by changing the rendering logic, you can go from this...
</p>
<p>
to this...
</p>
<p>
They don't look like the same game, but they are! All that was changed was swapping out primitive drawing functions for sprite drawing functions and adding a background.
</p>
<p>
If you wanted, you could even keep both rendering options and allow the player to choose which to use (or even switch during the middle of a round)!
</p>
</div></div>
<p>
Where you go from here is up to you, but here are some ideas to get you started.
</p>
<ul>
<li>Add more than one pipe. Experiment with how far apart they are. Keep it constant or add some randomness or change it with the score.</li>
</ul>
<ul>
<li>Change the rendering logic. Add animations.</li>
</ul>
<ul>
<li>Add sounds and music.</li>
</ul>
<ul>
<li>Increase the speed over time.</li>
</ul>
<ul>
<li>See how small you can make the cart. I have a version that is only 206 characters!</li>
</ul>
<p>
Here is a very polished flappy bird like cart to give you additional ideas. Note the use of sounds, music, different bird sprites, the cloud trail behind the bird, the stylized pipes, etc.
<iframe width="750px" height="680px" src="./not_flappy_bird.html"></iframe>
<a href="./not_flappy_bird.p8.png" target="_blank">Download</a>
</p>
<p>
You have already duplicated the core mechanics of this game! The rest is just additional incremental changes to the foundation you already have! Take it a step at a time. Think about the next small change you want to see and devise as small an experiment as possible to try it out. Rinse, repeat, and rejoice!
</p>
<script type="text/javascript" src="pico-8.js"></script>
<script type="text/javascript" src="/pico-8.js"></script>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../using/the_game_loop.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../flappy/code.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../using/the_game_loop.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../flappy/code.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../pico-8.js"></script>


    </body>
</html>
